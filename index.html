<!doctype html>
<html>
<head>
  <title>Tectur.io</title>

  <link href="/css/foundation.min.css" rel="stylesheet" type="text/css" />
  <script src="/js/foundation.min.js"></script>
  <link href="http://visjs.org/dist/vis.css" rel="stylesheet" type="text/css" />
  <script src="http://visjs.org/dist/vis.js"></script>

  <style type="text/css">
    #mynetwork {
      width: 1000px;
      height: 1000px;
      border: 1px dashed lightgray;
      margin: 0 auto;
    }
  </style>

  <script type="text/javascript">

    var node_config = [
      {name: 'redis', img: 'redis.png', labels: ['NoSQL','Storage','Database']},
      {name: 'mongodb', img: 'mongodb.png', labels: ['NoSQL','Storage','Database']},
      {name: 'cassandra', img: 'cassandra.png', labels: ['NoSQL','Storage','Database']},
      {name: 'mysql', img: 'mysql.png', labels: ['SQL','Storage','Database', 'RDBMS']},
      {name: 'postgres', img: 'postgres.png', labels: ['SQL','Storage','Database', 'RDBMS']},
      {name: 'nginx', img: 'nginx.png', labels: ['Web', 'HTTP', 'Proxy']},
      {name: 'apache', img: 'apache.png', labels: ['Web', 'HTTP', 'Proxy']},
      {name: 'lighttpd', img: 'lighttpd.png', labels: ['Web', 'HTTP', 'Proxy']},
      {name: 'tomcat', img: 'tomcat.png', labels: ['Web', 'HTTP', 'App','Java']},
      {name: 'jetty', img: 'jetty.png', labels: ['Web', 'HTTP', 'App','Java']},
      {name: 'rails', img: 'rails.png', labels: ['Web', 'HTTP', 'App','Java']}
    ];

    var edge_config = [
      {name: 'data', style: 'arrow', color: 'black', width: 1, labels: ['data','traffic','']},
      {name: 'data', style: 'arrow', color: 'black', width: 1, labels: ['data','traffic','']},
      {name: 'data', style: 'arrow', color: 'black', width: 1, labels: ['data','traffic','']},
      {name: 'bigdata', style: 'arrow', color: 'black', width: 3, labels: ['data','traffic','']},
      {name: 'secret', style: 'arrow', color: 'red', width: 1, labels: ['secret','encrypted','']},
      {name: 'connection', style: 'dash-line', color: 'blue', width: 1, labels: ['connection','','']}
    ];

    var nodes = null;
    var edges = null;
    var known_edges = null;
    var network = null;

    var DIR = 'img/';
    var LENGTH_MAIN = 150;
    var LENGTH_SUB = 50;

    // Called when the Visualization API is loaded.
    function draw() {
      var number_of_nodes = Math.floor((Math.random() * 3) + 5); // 5 to 10
      var number_of_edges = Math.floor(1.5 * number_of_nodes);
      // Create a data table with nodes.
      nodes = [];

      // Create a data table with links.
      edges = [];
      known_edges = [];

      for (i = 0; i < number_of_nodes; i++) {
        var node = node_config[Math.floor(Math.random()*node_config.length)];
        var label = node["labels"][Math.floor(Math.random()*node["labels"].length)];
        nodes.push({id: i, label: label, image: DIR + node["img"], shape: 'image'});
      }
      var i = 0;
      while (i < number_of_edges) {
        //var edge_length = Math.floor((Math.random() * 100) + 150); // 100 to 250
        var edge_length = 300;
        var node1 = nodes[Math.floor(Math.random()*nodes.length)];
        var node2 = nodes[Math.floor(Math.random()*nodes.length)];
        var edge = edge_config[Math.floor(Math.random()*edge_config.length)];
        //var label = edge["labels"][Math.floor(Math.random()*edge["labels"].length)];
        if ((node1["id"] != node2["id"]) && (known_edges.indexOf(node1["id"]+"-"+node2["id"]) == -1)) {
          edges.push({from: node1["id"], to: node2["id"], style: edge["style"], length: edge_length, color: edge["color"], width: edge["width"]})
          known_edges.push(node1["id"]+"-"+node2["id"]);
          i++;
        }
      }

      // create a network
      var container = document.getElementById('mynetwork');
      var data = {
        nodes: nodes,
        edges: edges
      };
      var options = {
        stabilize: false,   // stabilize positions before displaying
        configurePhysics: false,
        physics: {
          barnesHut: {
            gravitationalConstant: -4000,
            springConstant: 0,
            damping: 0.2
          }
        }
      };
      network = new vis.Network(container, data, options);
    }
  </script>
</head>

<body onload="draw()">
<div style="background-color:#2980b9; min-width: 100%; min-height: 500px; padding-top: 100px;  padding-bottom: 10px;">
  <div class="row">
    <div class="large-12 columns text-center">
      <h1 style="color: white; font-size: 8em">tectur.io</h1>
      <h2 style="color: white">Need inspiration for your growth-hacked startup's distributed Big-Data Web-Scale Cloud Platform SaaS App architecture?</h2>
    </div>
  </div>
</div>
<div style="min-width: 100%; min-height: 200px; padding-top: 50px; padding-bottom: 50px;">
  <div class="row">
    <div class="large-12 columns text-center">
      <a href="javascript:void(0);" class="button success" onclick="draw()">Refresh for more inspiration!</a>
    </div>
  </div>
</div>
<div style="min-width: 100%; padding-bottom: 100px;">
  <div class="row">
    <div class="large-12 columns text-center">
      <div id="mynetwork"></div>
    </div>
  </div>
</div>
<div style="background-color:#2980b9; min-width: 100%; min-height: 100px; padding-top: 10px;  padding-bottom: 10px;">
  <div class="row">
    <div class="large-12 columns text-center">
      <p style="color: white">Made by <a style="color:white" href="https://www.twitter.com/zeroXten">@zeroXten</a> with mild agitation somewhere just outside of London.</p>
    </div>
  </div>
</div>
</body>
</html>
